<div class="add-product-page">
    <div class="container bg-white border border-grey rounded-4 p-4">
        <h1>Add Product</h1>

        <!-- API error alert -->
        @if (submitError){
            <div class="alert alert-danger">  {{ submitError }}    </div>
        }        
        
        <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
            <div class="mb-3">
                <label for="product-name" class="form-label">Product Name</label>
                <input type="text" class="form-control" id="product-name" aria-describedby="productNameHelp" formControlName="name">
                <div type="text" id="productNameHelp" class="form-text">The name of the product that will displayed to customers.</div>
            </div>
            <div class="mb-3">
            <label for="description" class="form-label">Product Description</label>
            <textarea class="form-control" 
                id="description" rows="4" style="resize: none;"
                 placeholder="Enter product description" formControlName="description"></textarea>
            </div>
            <div class="mb-3">
            <label for="price" class="form-label">Price</label>
                <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input 
                    type="number" 
                    class="form-control" 
                    id="price" 
                    min="0" 
                    step="0.01" 
                    placeholder="Enter product price"
                    inputmode="decimal" formControlName="price">
                    <span class="input-group-text">USD</span>
                </div>
            </div>
            <div class="mb-3">
                <label for="stock" class="form-label">Stock</label>
                <input type="number" class="form-control" id="stock" min="0" step="1" placeholder="Enter available stock" formControlName="stock">
            </div>
            <div class="mb-3">
                <label for="formFile" class="form-label">Product Images</label>
                <input class="form-control" type="file" id="formFile" accept="image/*" multiple #fileInput (change)="onFileChange($event)">
            </div>
            <div class="mb-3">
                <label for="category" class="form-label">Category</label>
                <select class="form-select" id="category" formControlName = "category">
                    <option value="" disabled selected hidden>Select a category</option>

                    @if (categories && categories.length > 0) {
                        @for (item of categories; track item.id) {
                            <option value={{item.id}}>{{item.categoryName}}</option>
                        }
                    }
                </select>
            </div>
            
            <button type="submit" class="btn btn-primary" [disabled]="!productForm.valid">Submit</button>
        </form>
    </div>
</div>